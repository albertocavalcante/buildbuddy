load("@io_bazel_rules_go//go:def.bzl", "go_test")

go_test(
    name = "xds_test",
    srcs = [
        "xds_client_ack_nack_test.go",
        "xds_client_affinity_test.go",
        "xds_client_custom_lb_test.go",
        "xds_client_federation_test.go",
        "xds_client_ignore_resource_deletion_test.go",
        "xds_client_integration_test.go",
        "xds_client_outlier_detection_test.go",
        "xds_client_retry_test.go",
        "xds_rls_clusterspecifier_plugin_test.go",
        "xds_security_config_nack_test.go",
        "xds_server_integration_test.go",
        "xds_server_rbac_test.go",
        "xds_server_serving_mode_test.go",
    ],
    deps = [
        "//:grpc",
        "//authz/audit",
        "//balancer/leastrequest",
        "//balancer/rls",
        "//balancer/weightedroundrobin",
        "//codes",
        "//connectivity",
        "//credentials/insecure",
        "//credentials/xds",
        "//internal",
        "//internal/envconfig",
        "//internal/grpcsync",
        "//internal/grpctest",
        "//internal/proto/grpc_lookup_v1",
        "//internal/stubserver",
        "//internal/testutils",
        "//internal/testutils/rls",
        "//internal/testutils/roundrobin",
        "//internal/testutils/xds/bootstrap",
        "//internal/testutils/xds/e2e",
        "//interop/grpc_testing",
        "//peer",
        "//resolver",
        "//status",
        "//xds",
        "@com_github_cncf_xds_go//xds/type/v3:type",
        "@com_github_envoyproxy_go_control_plane//envoy/config/cluster/v3:cluster",
        "@com_github_envoyproxy_go_control_plane//envoy/config/core/v3:core",
        "@com_github_envoyproxy_go_control_plane//envoy/config/endpoint/v3:endpoint",
        "@com_github_envoyproxy_go_control_plane//envoy/config/listener/v3:listener",
        "@com_github_envoyproxy_go_control_plane//envoy/config/rbac/v3:rbac",
        "@com_github_envoyproxy_go_control_plane//envoy/config/route/v3:route",
        "@com_github_envoyproxy_go_control_plane//envoy/extensions/filters/http/rbac/v3:rbac",
        "@com_github_envoyproxy_go_control_plane//envoy/extensions/filters/http/router/v3:router",
        "@com_github_envoyproxy_go_control_plane//envoy/extensions/filters/network/http_connection_manager/v3:http_connection_manager",
        "@com_github_envoyproxy_go_control_plane//envoy/extensions/load_balancing_policies/client_side_weighted_round_robin/v3:client_side_weighted_round_robin",
        "@com_github_envoyproxy_go_control_plane//envoy/extensions/load_balancing_policies/least_request/v3:least_request",
        "@com_github_envoyproxy_go_control_plane//envoy/extensions/load_balancing_policies/round_robin/v3:round_robin",
        "@com_github_envoyproxy_go_control_plane//envoy/extensions/load_balancing_policies/wrr_locality/v3:wrr_locality",
        "@com_github_envoyproxy_go_control_plane//envoy/extensions/transport_sockets/tls/v3:tls",
        "@com_github_envoyproxy_go_control_plane//envoy/service/discovery/v3:discovery",
        "@com_github_envoyproxy_go_control_plane//envoy/type/matcher/v3:matcher",
        "@com_github_golang_protobuf//proto:go_default_library",
        "@com_github_golang_protobuf//ptypes/struct",
        "@com_github_golang_protobuf//ptypes/wrappers",
        "@com_github_google_go_cmp//cmp",
        "@com_github_google_uuid//:uuid",
        "@org_golang_google_protobuf//types/known/anypb",
        "@org_golang_google_protobuf//types/known/durationpb",
        "@org_golang_google_protobuf//types/known/structpb",
        "@org_golang_google_protobuf//types/known/wrapperspb",
    ],
)
